{% extends 'base.html' %}

{% block title %}{{ category.name }} - Yangiliklar.uz{% endblock %}

{% block content %}
<div class="category-header">
    <div class="container">
        <h1>{{ category.name }}</h1>
        <p>{{ category.name }} bo'yicha barcha yangiliklar</p>
    </div>
</div>

<div class="container news-section">
    <div class="news-grid">
        {% for article in articles %}
        <article class="news-card">
            <a href="{% url 'project:article_detail' article.slug %}">
                {% if article.image %}
                <img src="{{ article.image.url }}" alt="{{ article.title }}">
                {% endif %}
                <div class="news-card-content">
                    <span class="category-badge">{{ article.category.name }}</span>
                    <h3>{{ article.title }}</h3>
                    <p class="news-excerpt">{{ article.summary|truncatewords:15 }}</p>
                    <div class="news-meta">
                        <span class="author">{{ article.author.username }}</span>
                        <span class="date">{{ article.created_at|date:"d M, Y" }}</span>
                    </div>
                </div>
            </a>
        </article>
        {% empty %}
        <p>Bu kategoriyada hozircha maqolalar yo'q</p>
        {% endfor %}
    </div>

    <!-- Pagination -->
    {% if articles.has_other_pages %}
    <div class="pagination">
        {% if articles.has_previous %}
        <a href="?page=1" class="page-btn">« Birinchi</a>
        <a href="?page={{ articles.previous_page_number }}" class="page-btn">‹ Oldingi</a>
        {% endif %}

        {% for num in articles.paginator.page_range %}
            {% if articles.number == num %}
            <span class="page-btn active">{{ num }}</span>
            {% elif num > articles.number|add:'-3' and num < articles.number|add:'3' %}
            <a href="?page={{ num }}" class="page-btn">{{ num }}</a>
            {% endif %}
        {% endfor %}

        {% if articles.has_next %}
        <a href="?page={{ articles.next_page_number }}" class="page-btn">Keyingi ›</a>
        <a href="?page={{ articles.paginator.num_pages }}" class="page-btn">Oxirgi »</a>
        {% endif %}
    </div>
    {% endif %}
</div>

<style>
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    margin-top: 40px;
    flex-wrap: wrap;
}

.page-btn {
    padding: 10px 16px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    color: #374151;
    text-decoration: none;
    transition: all 0.2s;
}

.page-btn:hover {
    border-color: #0066cc;
    color: #0066cc;
    background: #f0f9ff;
}

.page-btn.active {
    background: #0066cc;
    color: white;
    border-color: #0066cc;
    cursor: default;
}
</style>
{% endblock %}